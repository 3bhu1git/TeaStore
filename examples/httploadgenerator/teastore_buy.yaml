services:
  - service_name: webui
    protocol: http
    response_content_type: ignore
    hosts:
      - 10.1.1.1:8080       # change as needed!

user_requests:
  - service_name: webui     # 1: open the start page
    method: GET
    uri:
      text: '/tools.descartes.teastore.webui/'
  - service_name: webui     # 2: open the login page
    method: GET
    uri:
      type: COMPOSITE
      children:
        - text: '/tools.descartes.teastore.webui/login'
        - type: REGEX_RANDOM_MATCH_SILENT
          text: 'href=.*category.*?category=(\\d+)&page=1.'
          store_as: categoryid
  - service_name: webui     # 3: login action
    method: POST
    uri:
      text: '/tools.descartes.teastore.webui/loginAction?username=user2&password=password'
  - service_name: webui     # 4: get products of a category
    method: POST
    uri:
      type: COMPOSITE
      children:
        - text: '/tools.descartes.teastore.webui/category?page=1&category='
        - type: VARIABLE
          text: categoryid
        - text: '&number=30'
  - service_name: webui     # 5: open a product page
    method: GET
    uri:
      type: COMPOSITE
      children:
        - text: '/tools.descartes.teastore.webui/product?id='
        - type: REGEX_RANDOM_MATCH
          text: 'href=.*product.*?id=(\\d+). ><img'
          store_as: productid
        - type: REGEX_RANDOM_MATCH_SILENT
          text: 'href=.*category.*?category=\\d+&page=\\d+.>(\\d+)</a></li>'
          store_as: page
  - service_name: webui     # 6: add to cart
    method: POST
    uri:
      type: COMPOSITE
      children:
        - text: '/tools.descartes.teastore.webui/cartAction?addToCart=&productid='
        - type: VARIABLE
          text: productid
  - service_name: webui     # 7: open a category page
    method: GET
    uri:
      type: COMPOSITE
      children:
        - text: '/tools.descartes.teastore.webui/category?page=1&category='
        - type: VARIABLE
          text: categoryid
  - service_name: webui     # 8: open another category page
    method: GET
    uri:
      type: COMPOSITE
      children:
        - text: '/tools.descartes.teastore.webui/category?page='
        - type: VARIABLE
          text: page
        - text: '&category='
        - type: VARIABLE
          text: categoryid
  - service_name: webui     # 9: another add to cart
    method: POST
    uri:
      type: COMPOSITE
      children:
        - text: '/tools.descartes.teastore.webui/cartAction?addToCart=&productid='
        - type: REGEX_RANDOM_MATCH
          text: 'href=.*product.*?id=(\\d+). ><img'
          store_as: productid
  - service_name: webui     # 10: open the order page
    method: GET
    uri:
      text: '/tools.descartes.teastore.webui/order'
  - service_name: webui     # 11: confirm order
    method: POST
    uri:
      text: '/tools.descartes.teastore.webui/cartAction?firstname=User&lastname=User&address1=Road&address2=City&cardtype=volvo&cardnumber=314159265359&expirydate=12/2050&confirm=Confirm'
  - service_name: webui     # 12: open the profile page
    method: GET
    uri:
      text: '/tools.descartes.teastore.webui/profile'
  - service_name: webui     # 13: logout
    method: POST
    uri:
      text: '/tools.descartes.teastore.webui/loginAction?logout='